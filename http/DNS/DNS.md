# Domain Name System

- 도메인 주소를 IP주소로 변환해 주는 규칙과 레코드들의 모음
- 사람이 기억하기 쉬운 도메인 주소를 컴퓨터가 이해할 수 있는 IP주소로 변환

## domain name sever(zone)

- 하위 도메인을 관리하는 서버(존)
- root 네임 서버
- TLD 네임 서버
- 권한 있는 네임 서버

도메인을 관리하는 도메인서버(존)
대표적으로 모든 도메인을 관리하는 루트 네임 서버, TLP(Top Level Domain)를 관리하는 네임 서버, 권한 있는 네임서버 로 구성된다.
이때 도메인 이름 서버는 하나의 서버로 구성되지 않는다. 안정성을 위해 최소한 두개 이상의 서버가 하나의 도메인 네임을 담당한다.

URL에 blog.abc.com 주소를 이력하면 DNS lookup이라는 과정이 발생한다.

1. 브라우저는 리졸버에게 IP주소를 요청한다. 리졸버는 요청받은 도메인의 IP 주소를 찾기위해 여러 네임 서버에 반복적인 질의를 하는 이름 서버이다. 리졸버는 우선 기존에 찾아본 도메인정보가 담긴 캐시파일을 살펴보고 해당하는 도메인정보가 있다면 즉시 IP주소를 반환한다.
2. 해당하는 도메인 정보를 찾을수 없다면 DNS 리졸버는 IP주소를 얻기 위해 네임 서버들에게 재귀적인 쿼리를 진행하게된다. 루트, 탑레벨, 권한있는 도메인 서버에 차례대로 쿼리를 진행하며 IP주소를 알아낸다. 이때 리졸버는 쿼리수를 줄일 목적으로 기록되지 않은 도메인 네임 서버들의 주소를 캐싱하기도 한다.
3. 마지막을 리조러는 전달받은 blog.adc.com의 IP주소를 기록하고 브라우저에게 전달한다.

## Zone FIle

도메인 네임 서버는 응답을 보내기위해 한개 이상의 존 파일이라는 파일을 가지고 있다. 존 파일은 네임과 클래스, TTL, 레코드 타입, 레코드 데이터로 구성된 레코드들로 구성되어 있다. 네임 서버들은 이러한 존 파일들을 바탕으로 요청에 해당되는 레코드를 리턴합니다. 리졸버는 이 레코드를 살펴보고 리턴해야할 IP혹은 다음에 쿼리를 진행할 서버의 주소를 확인한다.

```
레코드의 상세정보
이름: example.com 과 같은 도메인 네임 혹은 서브 도메인의 이름 등을 저장합니다.
레코드 클래스: 네트워크 타입을 지정한다. 일반적으로 IN(인터넷)으로 지정된다.
TTL: Time To Live 리졸버가 레코드를 몇초동안 지정할 지를 명시한다. 해당시간이 지나면 리졸버는 레코드를 삭제합니다.
레코드 타입: 반환될 데이터의 형식
레코드 데이터: 반환되는 데이터

* 레코드타입
A, AAAA
A: 데이터가 IPv4주소임을 명시한다.
AAAA: 데이터가 IPv6 주소임을 명시한다.
CNAME: 데이터가 도메인 주소임을 명시한다.
NS: 데이터가 도메인 네임 서버들의 주소임을 명시한다.
SOA - 데이터가 도메인 네임 서버들중 주 서버의 정보들에 대한 데이터. 주 네임 서버와 통신할 수 있ㅅ는 포트번호, TTL, 도메인 주소등이 적혀있다.
```
