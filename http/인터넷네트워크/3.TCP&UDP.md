먼저 TCP/IP 프로토콜 계층의 예시
채팅프로그램에서 'hello'를 입력하고 전송을 했다고 가정.

1. 프로그램이 hello 메시지를 생성 - 응용 계층
2. SOCKET 라이브러리를 통해 전달.
3. TCP 정보 생성(출발지port, 도착지 port, 전송제어, 순서, 검증 정보등등 포함, 메시지 데이터 포함) - 전송 계층
4. IP 패킷 생성(출발지 ip, 도착지 ip등 포함, TCP데이터 포함.) - 인터넷 계층
5. 네트워크 인터페이스 계층에서 Ethernet Frame도 생성하지만 자세한내용은 아직모름.

# TCP(전송 제어 프로토콜, Transmission Control Protocol) 특징

1. 연결지향 - TCP 3way handshake(가상연결)
2. 데이터 전달 보증
3. 순서 보장
4. 신뢰할 수 있는 프로토콜
5. 현재는 대부분 TCP사용

## TCP 3way handshake

- 순서: (Client to Sever)SYN -> (Server to Client)SYN + ACK -> (Client to Server)ACK(요즘은 이 단계에서 데이터 전송을 함께함)-> 데이터전송
- 전송계층에서 사용되는 논리적 주소가 이 단계에서의 연결을 뜻한다. Client와 Server간의 통신 연결을 확인했지만 그 경로에 있는 Node들의 상태를 알지는 못한다.
- SYN: 접속요청
- ACK: 요청수락

## 데이터 전달 보증

- 순서: (Client to Server)데이터 전달 -> (Server to Client)데이터 잘받았음.
- 서버가 클라이언트로부터 데이터를 수신하면 서버는 다시 클라이언트에게 성공적으로 데이터를 수신했다는 정보를 줌.

## 순서 보장

- 순서: (Client to Server)패킷1, 패킷2, 패킷3 순서로 전송 -> (Server)패킷1, 패킷3, 패킷2 순서로 도착 -> (Server to Client)패킷2부터 다시보내.
- 여기서 알아야할 점은 송수신 데이터의 순서가 다르더라도 서버에서 자체적으로 최적화 과정을 통해 순서를 맞출 수 있다는 것이다. 하지만 기본적으로 순서가 다르면 순서가 다른부분부터 전부 없애고 그 부분부터 다시 클라이언트에게 재요청을 한다.
- 이것이 가능한 이유는 TCP세그먼트에는 전송제어, 순서, 검증정보등이 포함 되었기때문이다.(이러한 이유로 TCP를 신뢰할 수 있는 프로토콜이라고 부른다.)

# UDP(사용자 데이터그램 프로토콜, User Datagram Protocol)

- 하얀 도화지에 비교(기능이 거의 없음)
- 연결지향이 아님 - TCP 3way handshake X
- 데이터 전달 보증 X
- 순서보장 X
- 데이터 전달 및 순서가 보장되지 않지만 단순하고 빠름
- 정리:
  - ip와 거의 같다. (Port, 체크섬 정도만 추가)
  - 애플리케이션에서 추가작업필요.
- TCP는 필요로하는 정보도 많고 과정도 복잡하기 때문에 느려질 수 밖에 없다. 더 빠르게 만들 수 있는 방법이 있더라도 TCP는 말그대로 규약. 이미 모두가 사용하고 있는 방식이기 때문에 바꿔버릴 수는 없다. 과거에는 신뢰성이 보장되지 않아도 되는 정보(영상, 이미지등)는 UDP로 처리했는데 지금은 거의다 TCP로 처리한다.

```
UDP는 언제 사용되는 걸까? UDP는 IP와 거의 같아서 백지상태라고 한다. 근데 여기서 PORT와 체크섬(정보 검증) 정보 정도만 추가되어있다. TCP는 더 빠르게 최적화할 방법이 있더라고 수정할 수 없다고 했다. 그때 UDP를 손을 댄다. 어플리케이션 레벨에서 뭔가 만들어 내면 된다.
최근에는 UDP가 각광받고 있다고한다. HTTP3에서 TCP의 속도 단점을 보완한 UDP프로토콜을 사용했기 때문이다.
```
