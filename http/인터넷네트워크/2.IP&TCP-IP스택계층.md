# IP(Internet Protocol)

## 인터넷 프로토콜의 역할

- 저정한 IP Address에 데이터 전달
- 패킷이라는 통신 단위로 데이터 전달

## IP 패킷 정보

- 출발지 IP, 도착지 IP등등..

## IP프로토콜의 한계

- 비연결성: 패킷을 열결받을 대상이 없거나 서비스 불능 상태여도 패킷전송
- 비신뢰성: 중간에 패킷이 사라질 수 있고, 순서가 보장되지 않는다.
- 프로그램 구분: 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상일때 구분하는데 한계가 있다.

# TCP/IP 스택의 4계층

- 응용(애플리케이션) 계층
- 전송 계층
- 인터넷 계층
- 네트워크 인터페이스 계층

## 1. 네트워크 인터페이스 계층

- 이 계층은 Node-to-Node간의 신뢰성 있는 데이터 전송을 담당하는 계층이다. MAC주소가 이 계층에서 사용된다.
- NIC(랜카드)가 있어야만 네트워크 통신을 할 수 있는데, 이름에서 알 수 있는 네트워크 계층에서 동작하는 장비다.
- 주요 프로토콜은 LAN상에서는 Ethernet, TokenRing, FDDI 등이 있고 WAN 상에서는 X.25, Frame Relay, PPP 등이 있다.

## 2. 인터넷 계층

- 호스트간의 라우팅을 담당.
- 주요 프로토콜:
  - IP(Internet Protocol): 비신뢰성, 비연결지향 데이터그램 프로토콜.
  - ARP(Address Resolution Protocol): 주소변환 프로토콜. IP주소를 MAC주소로 변환하는 프로토콜.
  - RARP(Reverse ARP): 반대로 MAC주소로 IP 주소를 찾는 프로토콜.

## 3. 전송계층

- 프로세스간의 신뢰성 있는 데이터 전송을 담당하는 계층.
- process-to-process 전송을 담당하기 위해서는 논리적 주소가 필요한데, process가 사용하는 포트 번호를 그 논리적 주소로 사용함.
- 전송계층의 프로토콜:
  - TCP(전송 제어 프로토콜): 신뢰성있는 연결지향형 프로토콜. 신뢰성있다는 말은 그 패킷에 대한 오류처리나 재전송따위로 에러를 복구하는 것을 말한다. 그때문에 TCP의 헤더에 붙는 정보가 많다.
  - UDP(사용자 데이터그램 프로토콜): 비신뢰성 비연결경 프로토콜. 패킷을 잃거나 오류가 있어도 대처하지 않는것. UDP의 헤더는 간단한 구조를 갖는다.

## 4. 응용계층

- 사용자와 가장 가까운 계층.서버나 클라이언트 응용프로그램이 이 계층에서 동작한다. 동작하기위해 전송계층의 주소 즉, 포트번호를 사용한다.
- 주요 프로토콜:
  - HTTP: TCP기반의 프로토콜로 포트번호 80을 사용한다.
  - Telnet: TCP 포트번호 23번을 사용한다. 원격 터미널을 접속할때 이 프로토콜을 사용한다.
  - SSH(Secure Shell): 텔넷과 같은 서비스는 보안에 취약하다. 비밀번호가 암호화되지 않아 그대로 노출이 되기 때문인데, 이를 보완한 것이 SSH. 포트번호 22번 사용.
  - FTP(File Transfer Protocol): 파일 전송 프로토콜. 파일을 받거나 올릴때 FTP를 사용한다. FTP는 파일을 올리거나 내려받을때 신뢰성을 중요시하기 때문에 TCP에서 동작한다. 2개의 포트를 사용하는데 20번은 데이터 전송을 위한 용도, 21번은 제어용으로 사용한다.
  - SMTP(Simple Mail Transfer Protocol): 메일 전송 프로토콜. TCP상에서 동작하며 포트 25번을 사용한다.
  - POP3(Post Office Protocol Version3): 메일 수신용 프로토콜. TCP 포트 110번 사용.
  - DNS: 도메인명에 대한 호스트 정보를 제공해준다. 기본적으로 UDP상에서 동작한다. 기본적으로 실패하면 다시 한번 요청하면 되고 그렇게 중요한 정보가 아닌게 보통. 하지만 신뢰성을 요할 경우 TCP상 UDP, TCP포트 53번을 사용한다.(HTTP3 에서 UDP프로토콜을 사용하게 되면서 UDP가 각광받고 있다.)
